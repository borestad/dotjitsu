#!/bin/sh
#
# Squashes history between two commits

MSG=${1:-'Initial commit'}

echo "âœ” Squash all commits"
git reset $(git commit-tree HEAD^{tree} -m "$MSG");

echo 'âœ” Remove all tags'
git tag -l | xargs git tag -d

echo
echo 'âœ” Clear the reflog:'
git reflog expire --expire=now --expire-unreachable=all --all --verbose

echo
echo 'âœ” List all unreachable objects:'
#git fsck --unreachable

echo
echo 'âœ” Delete all dangling objects'
git gc --prune=now


echo
echo '...done!'
echo
echo "(ðŸ’¡ Don't forget to git push)"

