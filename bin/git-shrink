#!/usr/bin/env bash

# https://stackoverflow.com/questions/38171899/how-to-reduce-the-depth-of-an-existing-git-clone/46004595#46004595

hr -
echo 'BEFORE'
git count-objects -vH
hr -

echo 'ðŸš€ Remove all tags:'
git tag -l | xargs git tag -d

echo 'ðŸš€ Clear the reflog:'
git rerere forget .

echo 'ðŸš€ Clear the reflog:'
git reflog expire --expire=now --expire-unreachable=now --all --verbose

echo 'ðŸš€ Delete all dangling objects'
git gc --prune=now --aggressive

hr -
echo 'AFTER'
git count-objects -vH
hr -
