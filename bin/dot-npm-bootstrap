#!/usr/bin/env zsh


echo "☑️  Upgrade node LTS..."
fnm install --lts

echo "☑️  Set global cache config..."
npm config --global set cache ~/.cache/npm-cache

if ! command -v pnpm > /dev/null 2>&1; then
  echo "☑️  Installing pnpm..."
   #npx pnpm add -g pnpm
   npm install -g pnpm
else
  echo "☑️  Upgrading pnpm..."
  pnpm add -g pnpm
fi


args=(
  # Globals
  @babel/core@latest
  @babel/node@latest
  bcat@latest
  diff-so-fancy@latest
  git-recent@latest
  http-server@latest
  jase@latest
  jq.node@latest
  local-web-server@latest
  @types/node@
  ts-node@latest
  typescript@latest
  node-notifier@latest

  # Linters
  prettier@latest
  eslint@latest
  @typescript-eslint/eslint-plugin@latest
  @typescript-eslint/parser@latest
  #eslint-config-airbnb@latest
  # eslint-config-prettier@latest
  # eslint-config-standard@latest
  # eslint-plugin-import@latest
  #eslint-plugin-jsx-a11y@latest
  # eslint-plugin-node@latest
  # eslint-plugin-prettier@latest
  # eslint-plugin-promise@latest
  # eslint-plugin-react@latest
  # eslint-plugin-sonarjs@latest
  # eslint-plugin-unicorn@latest
)


#NODE_ENV=production yarn global add --production --no-progress -s --link-duplicates "${args[@]}"
echo "☑️  Installing global pnpm packages..."
NODE_ENV=production pnpm install -g "${args[@]}"
#yarn global add "${args[@]}"


# yarn global remove $(yarn global list | grep info | sed 's/^info "\(.*\)@.*".*$/\1/')
